version: "3.8"
services:
  api:
    build: ./api/
    container_name: mlops-fastapi-api
    restart: always
    volumes:
      - ./api/:/app
    ports:
      - 8000:8000
    command: ['uvicorn',
              'main:app',
              '--reload',
              '--reload-include',
              '*.pickle',
              "--host",
              "0.0.0.0"]  
  prometheus:
    image: prom/prometheus
    container_name: mlops-fastapi-prometheus
    volumes:
      - ./prometheus-local/prometheus.yml:/etc/prometheus/prometheus.yml
    ports: 
      - 9090:9090